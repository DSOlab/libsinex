
#! /usr/bin/bash

set -e

PROG=$1
SNX=$2
SCR=.libsinex_test_scratch_file_tmp
REF=.libsinex_test_scratch_file_tmp_ref

cat << EndOfReferenceResult > ${REF}
STAX DIOA 1 4.595215241980740e+06 7.00710e-04
STAY DIOA 1 2.039475419323280e+06 9.17570e-04
STAZ DIOA 1 3.912615025700760e+06 5.41710e-04
VELX DIOA 1 3.637468845225010e-03 6.75020e-05
VELY DIOA 1 1.056223407974260e-02 8.71490e-05
VELZ DIOA 1 -9.426336436981229e-03 5.09280e-05
STAX SANB 1 1.769700384383810e+06 2.54210e-03
STAY SANB 1 -5.044614923237790e+06 2.09630e-03
STAZ SANB 1 -3.468261194272150e+06 1.89150e-03
VELX SANB 1 1.592038595591120e-02 1.01000e-03
VELY SANB 1 -1.351121501614810e-03 7.93030e-04
VELZ SANB 1 1.205159169573600e-02 7.01610e-04
STAX SANB 2 1.769700340962480e+06 6.36720e-03
STAY SANB 2 -5.044614926905890e+06 4.12370e-03
STAZ SANB 2 -3.468261200079050e+06 3.31430e-03
VELX SANB 2 2.800880698026070e-02 1.31210e-03
VELY SANB 2 8.552265881074210e-04 8.45190e-04
VELZ SANB 2 1.288166072788460e-02 6.80810e-04
STAX SANB 3 1.769700357410740e+06 9.19860e-03
STAY SANB 3 -5.044614936923430e+06 5.93400e-03
STAZ SANB 3 -3.468261195052390e+06 4.77330e-03
VELX SANB 3 2.800881348458340e-02 1.31210e-03
VELY SANB 3 8.552147669062060e-04 8.45190e-04
VELZ SANB 3 1.288167162517530e-02 6.80820e-04
STAX DIOB 1 4.595212449303430e+06 1.02390e-03
STAY DIOB 1 2.039473637703670e+06 1.35310e-03
STAZ DIOB 1 3.912617948577010e+06 7.84230e-04
VELX DIOB 1 3.637547438255440e-03 6.74710e-05
VELY DIOB 1 1.056227263341140e-02 8.71260e-05
VELZ DIOB 1 -9.426591147401461e-03 5.08870e-05
STAX SANB 4 1.769700257283840e+06 8.93240e-02
STAY SANB 4 -5.044614681440200e+06 5.78180e-02
STAZ SANB 4 -3.468261300102730e+06 4.58400e-02
VELX SANB 4 4.134535230808270e-02 1.03890e-02
VELY SANB 4 -3.024101793502570e-02 6.72820e-03
VELZ SANB 4 2.597184695458340e-02 5.33500e-03
STAX SANB 5 1.769700207596660e+06 2.01840e-01
STAY SANB 5 -5.044614705332970e+06 1.32460e-01
STAZ SANB 5 -3.468261150862130e+06 1.05310e-01
VELX SANB 5 4.595238276780600e-02 2.19640e-02
VELY SANB 5 -2.735450854264840e-02 1.44160e-02
VELZ SANB 5 9.525273258645359e-03 1.14600e-02
STAX SANB 6 1.769700545213550e+06 1.18630e-01
STAY SANB 6 -5.044614945103070e+06 7.65760e-02
STAZ SANB 6 -3.468261189579460e+06 6.23150e-02
VELX SANB 6 1.071638816683260e-02 1.21520e-02
VELY SANB 6 -1.316197644446920e-03 7.84250e-03
VELZ SANB 6 1.380086974623880e-02 6.38410e-03
STAX SANB 7 1.769700401206020e+06 1.36380e-02
STAY SANB 7 -5.044614828645510e+06 8.70140e-03
STAZ SANB 7 -3.468261210709750e+06 6.97420e-03
VELX SANB 7 -3.633092468969300e-03 1.15640e-03
VELY SANB 7 -1.289805305099850e-02 7.37660e-04
VELZ SANB 7 3.860336078325060e-03 5.91340e-04
EndOfReferenceResult

# Run the test program and store output
${PROG} ${SNX} FOO SANB DIOA KOKO DIOB > ${SCR}

# Diff the files
diff ${REF} ${SCR}

# exit
exit $?
